<script src="viz.js"></script>
<textarea id="input">digraph {
  A1 -> {B1; B2}
  B1 -> {C1; C2} -> D1
  B2 -> {C2; C3} -> D2
        {D1; D2} -> E1
}</textarea>
<div id="output"></div>
<script>{
  document.title = "LiveViz";
  const input = document.getElementById("input");
  const output = document.getElementById("output");
  if (window.location.search) {
    input.value = decodeURIComponent(window.location.search.substr(1));
  }
  const render = () => output.innerHTML = Viz(input.value, "svg");
  const remember = () => {
    const encodedState = encodeURIComponent(input.value);
    const uri = `${location.protocol}//${location.host}${location.pathname}?${encodedState}`;
    history.replaceState({encodedState}, document.title, uri);
  };
  input.onkeyup = render;
  render();
  setInterval(remember, 2500);
}</script>
<style>
  body {
    width: 95%;
    height: 95%;
    display: grid;
    grid-template-columns: 35% 65%;
  }
  #input {
    grid-column: 1;
  }
  #output {
    grid-column: 2;
    display: flex;
  }
  #output > * {
    justify-content: center;
    align-content: center;
    text-align: center;
    margin: 0 auto;
  }
</style>
